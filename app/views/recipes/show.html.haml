= content_for(:title, @recipe.name)

%div#photo
  = link_to_highslide_image(@recipe, :medium, nil, :hide_default => true)
  
  %div#alternate_photos.span-6
    - (@recipe.photos - [@recipe.main_photo]).each do |photo|
      = link_to_highslide_image(photo, :thumb, nil, :hide_default => true)
  
  
%div#details
  %div
    %strong Prep time:
    =h @recipe.prep_time
  %div
    %strong $ / Serving:
    =h float_to_price(@recipe, :average_price_per_serving)
  %div
    %strong Cook time:
    =h @recipe.cook_time
  %div
    %strong $ Total:
    =h float_to_price(@recipe, :average_price)
  %div
    %strong Serves:
    =h @recipe.servings
  
  %h3{:style => "padding-top:10px;clear:both"} Nutrition Info

  %div#nutrients
    - [:kcal, :fat, :carbs, :protein, :sugar, :saturated_fat, :monounsaturated_fat, :polyunsaturated_fat].each do |nutrient|
      %div
        %strong= nutrient.to_s.titleize + ":"
        =h @recipe.measure(nutrient).round
  
%div.colspacer
%div.colspacer

%h3 Directions

%div#directions= BlueCloth.new(@recipe.directions || "").to_html

%h3 Ingredients

// I know this is no better than a table, but it lines up so nice!
%div#ingredients
  %div.first_header Amount
  %div.header Cost
  %div.header Bulk
  %br
  %hr
  - @recipe.items.each do |item|
    %div.first= item.name
    %div= item.qty
    %div= float_to_price(item, :average_price)
    %div.last= float_to_price(item, :average_price_per_amount)

%div.colspacer

= (link_to 'Edit', edit_recipe_path(@recipe)) + " | " if current_user_owns?(@recipe)

= link_to 'Back', recipes_path
